{
    admin off
    auto_https off
}

:3000 {
    # GME - Google Maps Extractor
    handle /gme* {
        uri strip_prefix /gme
        reverse_proxy gme:8000
    }

    # WAHA - all routes go directly without stripping
    # Dashboard: /waha/dashboard, API: /waha/api, Swagger: /waha/swagger
    handle /waha* {
        reverse_proxy waha:3000
    }

    # Root - show available routes
    handle / {
        respond "MS Leads Proxy

Routes:
  /gme/*   -> Google Maps Extractor (API on /gme)
  /waha/*  -> WAHA WhatsApp API (dashboard on /waha/dashboard)
" 200
    }

    # Fallback
    handle {
        respond "Not Found" 404
    }
}
