{
    admin off
    auto_https off
}

:3000 {
    # GME - Google Maps Extractor
    handle /gme* {
        uri strip_prefix /gme
        reverse_proxy gme:8000
    }

    # WAHA Dashboard static files (loaded from /dashboard/* by browser)
    handle /dashboard* {
        reverse_proxy waha:3000
    }

    # WAHA API routes (loaded from /api/* by dashboard)
    handle /api* {
        reverse_proxy waha:3000
    }

    # WAHA - WhatsApp API entry point
    handle /waha* {
        uri strip_prefix /waha
        reverse_proxy waha:3000
    }

    # Root - show available routes
    handle / {
        respond "MS Leads Proxy

Routes:
  /gme   -> Google Maps Extractor
  /waha  -> WAHA WhatsApp API
" 200
    }

    # Fallback
    handle {
        respond "Not Found" 404
    }
}
